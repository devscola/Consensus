<dom-module id="login-password">
    <template>
        <style>
        </style>

        <input id="wcPassword" class="form-group" type="password" placeholder="Insert password here" content="{{password}}">
    </template>

    <script>
        Polymer({
            is: 'login-password',

            properties: {
                password: {
                    type: String,
                    notify: true
                }
            },

            ready: function() {
                this.element = this.$.wcPassword;
                this.element.addEventListener('blur', this.send.bind(this));
                this.subscribe();
            },

            send: function() {
                this.password = this.element.value;
            },

            showText: function() {
                this.element.type = 'text';
                LoginBus.publish('login.passwordToggler.change', 'open');
            },

            showPassword:  function() {
                this.element.type = 'password';
                LoginBus.publish('login.passwordToggler.change', 'close');
            },

            toggleVisibility: function() {
                if (this.element.type === 'password') {
                    this.showText();
                } else {
                    this.showPassword();
                }
            },

            subscribe: function() {
                LoginBus.subscribe('login.passwordToggler.clicked', this.toggleVisibility.bind(this));
            }

        });
     </script>
</dom-module>
